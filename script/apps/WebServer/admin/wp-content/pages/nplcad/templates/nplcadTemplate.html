<div class="container-fluid">
<div class="row" >
<section id="panel" class="panel">
  <header>
	<h1>
	  NPLCAD
	</h1>
	<span id="showcode" class="showcode">
	  <i class="ion-eye icon-yepcode"></i>
	  <i class="ion-eye-disabled icon-nocode"></i>
	</span>
  </header>
  <article>
	<div>
			
		<div class="col-lg-12" id="view_container"></div>
			
		<button class="col-md-2" ng-click="onRunCode()"  id="runcode" >Compile</button>	
		<section id="text-demo">
		<form id="text-options" class="col-md-5">
			
			<input class="col-md-7"	id="stlFile" type="file"  accept=".stl"/>			
			<button class="col-md-5" id="loadStl" type="submit" ng-click="addStl()"><i class="glyphicon glyphicon-upload"></i> Add</button>
		</form>
		<form id="text-options" class="col-md-5">
			<label>Filename: 
			<input 	id="wtf"	 type="text" class="filename"  placeholder="Enter Filename"/> .stl</label>
			
			<button id="saveStl" type="submit" ng-click="onRunCode(true)"><i class="glyphicon glyphicon-download"></i> Save</button>
		</form>
		</section>
				
			
	</div>



	<div class="code" style="max-width:480px">
				<!-- Right side-->
		<div id="right" style="background-color:white; boder-style:none">
			<!-- Right top two button-->
			
				<!-- First button-->
				<div class="col-md-6">	
					<button class="largeButton" type="button" ng-click="isCollapsed = !isCollapsed; isCollapsedHorizontal = !isCollapsedHorizontal">Add ploygon by button</button>
				</div>
				
				<!-- Second button-->
				<div class="col-md-6"uib-dropdown is-open="status.isopen">
				  <button class="largeButton" id="single-button" type="button"  uib-dropdown-toggle ng-disabled="disabled">
					Code example <span class="caret"></span>
				  </button>
				  <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
					<li role="menuitem" ng-click="changeEditorContent(1)"><a href="#">Cube, sphere and cylinder</a></li>
					<li role="menuitem" ng-click="changeEditorContent(2)"><a href="#">Subtract</a></li>
					<li role="menuitem" ng-click="changeEditorContent(3)"><a href="#">Intersect</a></li>
					<li role="menuitem" ng-click="changeEditorContent(4)"><a href="#">Comparsion</a></li>
					<li class="divider"></li>
					
					<li role="menuitem" ng-click="changeEditorContent(5)"><a href="#">Example five</a></li>
					<li role="menuitem" ng-click="changeEditorContent(6)"><a href="#">Example Six</a></li>
				  </ul>
				</div>
				
			<hr>
	<!-- Hidden Code guide -->

	<div uib-collapse="isCollapsed">
		<div class="well well-lg">
			<div  class="col-md-6">
			<form id="cube-options">
				<h3>Cube:</h3>						
				<label>Center:
					<div class="paraDiv" id="cubeCenter">
						
						<input class="paraInput" name="cubeInput" type="text" size="3" value="2" >,
						<input class="paraInput" name="cubeInput" type="text" size="3" value="2">,
						<input class="paraInput" name="cubeInput" type="text" size="3" value="2" >
					</div>

					Radius:
					<div class="paraDiv" id="cubeRadius">
						<input class="paraInput" name="cubeInput" type="text" size="3" value="2">,
						<input class="paraInput" name="cubeInput" type="text" size="3" value="2">,
						<input class="paraInput" name="cubeInput" type="text" size="3" value="2">
					</div>
				</label>
			<input type="submit" ng-click="editText('cube')" value="Add"/>
			</form>
			<form id="Sphere-options">
				<h3>Sphere: </h3>
				<label>Center:			
				<div class="paraDiv" id="sphereCenter">
					
					<input class="paraInput" name="sphereInput" type="text" size="3" value="4" >,
					<input class="paraInput" name="sphereInput" type="text" size="3" value="4" >,
					<input class="paraInput" name="sphereInput" type="text" size="3" value="4" >
				</div>
				<label>
				</label>
				<div class="paraDiv" id="sphereThree">
					<p>Radius, slices, stacks:</p> 
					<input class="paraInput" name="sphereInput" type="text" size="3" value="2" >					
					<input class="paraInput" name="sphereInput" type="text" size="3" value="12">					
					<input class="paraInput" name="sphereInput" type="text" size="3" value="8" >
			 	</div>
				</label>
				<input type="submit" ng-click="editText('sphere')" value="Add"/>
			</form>
			</div>

			<form id="cylinder-options" class="col-md-6">

				<h3>Cylinder: </h3>
				<label>
				Start:			
				<div class="paraDiv" id="cylinderCenter">
					
					<input class="paraInput" name="cylinderInput" type="text" size="3" value="-4" >,
					<input class="paraInput" name="cylinderInput" type="text" size="3" value="-4" >,
					<input class="paraInput" name="cylinderInput" type="text" size="3" value="-4" >
				</div>
				</label>
				<label>End:
				<div class="paraDiv" id="cylinderCenter">
					
					<input class="paraInput" name="cylinderInput" type="text" size="3" value="-2" >,
					<input class="paraInput" name="cylinderInput" type="text" size="3" value="-2" >,
					<input class="paraInput" name="cylinderInput" type="text" size="3" value="-2" >
				</div>
				</label>
				<label>
				<div class="paraDiv" id="sphereThree">
					Radius, slices:
					<input class="paraInput" name="cylinderInput" type="text" size="3" value="2" >
					<input class="paraInput" name="cylinderInput" type="text" size="3" value="8" >
				</div>
				</label>
				<input type="submit" ng-click="editText('cylinder')" value="Add"/>
			</form>
			<div class="col-md-6">
		
				<div>
				  <material-picker ng-model="color" hover-model="hoverColor" size="size"></material-picker>
				  R: <input ng-model="color.r" name="getColor" class="form-control" maxlength="3" ng-blur="correct()" /> 
				  G: <input ng-model="color.g" name="getColor" class="form-control" maxlength="3" ng-blur="correct()" /> 
				  B: <input ng-model="color.b" name="getColor" class="form-control" maxlength="3" ng-blur="correct()" />
				  <div ng-bind="color.name"></div>
				  <div class="colorpicker-preview" ng-style="{background: color.hex}"></div>
				  <button class="btn btn-info" ng-click="setColor()">Set to White</button>
				  <button class="btn btn-info" ng-click="color.hex='#000000'">Set to Black</button>
				  <button class="btn btn-info" ng-click="color.hex='#FF6F00'">Set to Orange</button>
				  <!--
				  <div ng-show="hoverColor !== null">
					R: {{hoverColor.r}} G: {{hoverColor.g}} B: {{hoverColor.b}} Name: {{hoverColor.name}} 
				  </div>
				  -->
				</div>
			</div>				
		</div>
		
	</div>


	<div uib-collapse="isCollapsedHorizontal">

		<div id="code_editor" >
	function main()
	local a = CSG.cube();
	local b = CSG.sphere({ radius = 1.35, stacks = 12 });
	local c = CSG.cylinder({ radius= 0.7, ["from"] = {-1, 0, 0}, ["to"] = {1, 0, 0} });
	local d = CSG.cylinder({ radius= 0.7, ["from"] = {0, -1, 0}, ["to"] = {0, 1, 0} });
	local e = CSG.cylinder({ radius= 0.7, ["from"] = {0, 0, -1}, ["to"] = {0, 0, 1} });
	a:SetColor({255,255,0});
	b:SetColor({0,255,255});
	c:SetColor({255,0,0});
	local csg_node = a:intersect(b):subtract(c:union(d):union(e));
	echo(csg_node);
	echo(c)
	end
		</div>
	</div>
	</br>
		
	</div>

	<div class="row" style="padding-left:30px;padding-right:30px;" id="logWnd">
	</div>
	</div>

  </article>

</section>
</div>
</div>


<div id="example" hidden="hidden">


    <div id="code_example1">
        --Cube, sphere and cylinder
        NPL.load("(gl)script/ide/CSG/CSG.lua");

        --set cube parameters: center and radius.
        local cube_center = {0,1,8};
        local cube_radius = {10,2,1};

        --Set sphere parameters: center, radius, slices, stacks.The slices
        --and stacks parameters control the tessellation along
        --the longitude and latitude directions.
        local sphere_center = {0,0,1};
        local sphere_radius = 4;
        local sphere_slices = 16;
        local sphere_stacks = 8;

        --Set cylinder parameters: start, end, radius, slice.The slices
        --parameter controls the tessellation.
        local cylinder_start = {0,-4,-8};
        local cylinder_end = {0,4,-8};
        local cylinder_radius = 4;
        local cylinder_slice = 8;

        --Get all parameters in a table.
        local cube_options = {
        center = cube_center,
        radius = cube_radius,
        }
        local sphere_options = {
        center = sphere_center,
        radius = sphere_radius,
        slices = sphere_slices,
        stacks = sphere_stacks,
        }
        local cylinder_options = {
        ["from"] = cylinder_start,
        ["to"] = cylinder_end,
        radius = cylinder_radius,
        slice = cylinder_slice,
        }
        --Render 3D geometry.
        local CSG = commonlib.gettable("CSG.CSG");
        local cube = CSG.cube(cube_options);
        local sphere = CSG.sphere(sphere_options);
        local cylinder = CSG.cylinder(cylinder_options);
        local csg_node = cube:union(sphere);
        csg_node = csg_node:union(cylinder);
        local vertices,indices,normals,colors = CSG.toMesh(csg_node);
        return {vertices,indices,normals,colors};
    </div>
    <div id="code_example2">
        --Subtract
        -- A:subtract(B)
        -- Return a new CSG solid representing space in this solid but
        -- not in the solid `csg`. Neither this solid nor the solid
        -- `csg` are modified.
        --
        --     +-------+            +-------+
        --     |       |            |       |
        --     |   A   |            |       |
        --     |    +--+----+   =   |    +--+
        --     +----+--+    |       +----+
        --          |   B   |
        --          |       |
        --          +-------+
        --
        NPL.load("(gl)script/ide/CSG/CSG.lua");
        local cube_center = {0,1,0};
        local cube_radius = {10,2,1};

        local sphere_center = {0,0,0};
        local sphere_radius = 4;
        local sphere_slices = 16;
        local sphere_stacks = 8;

        local cube_options = {
        center = cube_center,
        radius = cube_radius,
        }
        local sphere_options = {
        center = sphere_center,
        radius = sphere_radius,
        slices = sphere_slices,
        stacks = sphere_stacks,
        }

        local CSG = commonlib.gettable("CSG.CSG");
        local cube = CSG.cube(cube_options);
        local sphere = CSG.sphere(sphere_options);
        local csg_node = cube:subtract(sphere);
        local vertices,indices,normals,colors = CSG.toMesh(csg_node);
        return {vertices,indices,normals,colors};
    </div>
    <div id="code_example3">
        --Intersect
        -- Return a new CSG solid representing space both this solid and
        -- in the solid `csg`. Neither this solid nor the solid `csg`
        -- are modified.
        --
        --     A:intersect(B)
        --
        --     +-------+
        --     |       |
        --     |   A   |
        --     |    +--+----+   =   +--+
        --     +----+--+    |       +--+
        --          |   B   |
        --          |       |
        --          +-------+
        --
        NPL.load("(gl)script/ide/CSG/CSG.lua");
        local cube_center = {0,2,0};
        local cube_radius = {10,2,1};

        local sphere_center = {0,0,0};
        local sphere_radius = 4;
        local sphere_slices = 16;
        local sphere_stacks = 8;

        local cube_options = {
        center = cube_center,
        radius = cube_radius,
        }
        local sphere_options = {
        center = sphere_center,
        radius = sphere_radius,
        slices = sphere_slices,
        stacks = sphere_stacks,
        }

        local CSG = commonlib.gettable("CSG.CSG");
        local cube = CSG.cube(cube_options);
        local sphere = CSG.sphere(sphere_options);
        local csg_node = sphere:intersect(cube);
        local vertices,indices,normals,colors = CSG.toMesh(csg_node);
        return {vertices,indices,normals,colors};
    </div>
    <div id="code_example4">

        NPL.load("(gl)script/ide/CSG/CSG.lua");

        local CSG = commonlib.gettable("CSG.CSG");

        local a = CSG.cube({ center= {-0.25, -0.25, -0.25} });
        local b = CSG.sphere({ radius = 1.3, center = {0.25, 0.25, 0.25} });

        local c = CSG.cube({ center= {-4.25, -0.25, -0.25} });
        local d = CSG.sphere({ radius = 1.3, center = {-3.75, 0.25, 0.25} });

        local e = CSG.cube({ center= {3.75, -0.25, -0.25} });
        local f = CSG.sphere({ radius = 1.3, center = {4.25, 0.25, 0.25} });

        local csg_node =(c:subtract(d)):union(a:union(b)):union(e:intersect(f));

        local vertices,indices,normals,colors = CSG.toMesh(csg_node);
        return {vertices,indices,normals,colors};

    </div>
    <div id="code_example5">
        NPL.load("(gl)script/ide/CSG/CSG.lua");

        local CSG = commonlib.gettable("CSG.CSG");

        local a = CSG.cube();
        local b = CSG.sphere({ radius = 1.35, stacks = 12 });
        local c = CSG.cylinder({ radius= 0.7, ["from"] = {-1, 0, 0}, ["to"] = {1, 0, 0} });
        local d = CSG.cylinder({ radius= 0.7, ["from"] = {0, -1, 0}, ["to"] = {0, 1, 0} });
        local e = CSG.cylinder({ radius= 0.7, ["from"] = {0, 0, -1}, ["to"] = {0, 0, 1} });
        local csg_node = a:intersect(b):subtract(c:union(d):union(e));



        local vertices,indices,normals,colors = CSG.toMesh(csg_node);
        return {vertices,indices,normals,colors};
    </div>
    <div id="code_example6">
function main()
    local a = CSG.cube();
    local b = CSG.sphere({ radius = 1.35, stacks = 12 });
    local c = CSG.cylinder({ radius= 0.7, ["from"] = {-1, 0, 0}, ["to"] = {1, 0, 0} });
    local d = CSG.cylinder({ radius= 0.7, ["from"] = {0, -1, 0}, ["to"] = {0, 1, 0} });
    local e = CSG.cylinder({ radius= 0.7, ["from"] = {0, 0, -1}, ["to"] = {0, 0, 1} });
    a:SetColor({255,255,0});
    b:SetColor({0,255,255});
    c:SetColor({255,0,0});
    local csg_node = a:intersect(b):subtract(c:union(d):union(e));
    echo(csg_node);
    echo(c)
	end
    </div>
</div>


